
Set up connection to PlanetFM db using MS SQL Driver

sudo apt-get install freetds-common freetds-bin unixodbc php5-sybase



Warning: Illegal string offset 'tid' in shs_field_widget_afterbuild() (line 344 of /var/www/sites/all/modules/shs/shs.module).

Events can't start on one day and end on another. You must create a repeat event with the start and end times for each day.

select rmID, count(*) as n from FDS.Bookings join FDS.Rooms on FDS.Bookings.rmID = FDS.Rooms. group by rmID

select rmID, rmDescription, bkgDesc, bkgID_ai, bkgRepeatBkgRef  from FDS.Bookings join FDS.Rooms on FDS.Bookings.rmID = FDS.Rooms.rmID_ai where bkgCreatedDate > '2015-02-28' and bkgRepeatBkgRef is not null order by bkgID_ai


Embed code for green pages

<div style="border:solid 1px #e8e8e8; border-radius: 5px; width:450px">
<div style="
    padding: 0.5em;
    color: black;
    font-size: 18px;
    font-weight: bold;
">Today @ RBGE</div>
<iframe src="http://cal.rbge.org.uk/rbge/today_embed" style="width:100%; height: 450px; border-top: solid 1px #e8e8e8"></iframe>
</div>


Planet FM Example Data
======================

array(101) {
  [0]=>
  float(21)
  ["rmID"]=>
  float(21)
  [1]=>
  string(21) "***** JOHN MUIR GROVE"
  ["rmDescription"]=>
  string(21) "***** JOHN MUIR GROVE"
  [2]=>
  float(49574)
  ["bkgID_ai"]=>
  float(49574)
  [3]=>
  float(48913)
  ["bkgRef"]=>
  float(48913)
  [4]=>
  float(21)
  [5]=>
  float(31)
  ["rlID"]=>
  float(31)
  [6]=>
  NULL
  ["npmJobRef"]=>
  NULL
  [7]=>
  string(3) "JIM"
  ["bkgCreatedByUser"]=>
  string(3) "JIM"
  [8]=>
  string(26) "Apr 26 2013 01:38:04:493PM"
  ["bkgCreatedDate"]=>
  string(26) "Apr 26 2013 01:38:04:493PM"
  [9]=>
  string(28) "CONTACT PRESTIGE FOR BOOKING"
  ["bkgDesc"]=>
  string(28) "CONTACT PRESTIGE FOR BOOKING"
  [10]=>
  float(70)
  ["bkgReqByCrgRef"]=>
  float(70)
  [11]=>
  string(3) "Jim"
  ["bkgReqByFirstName"]=>
  string(3) "Jim"
  [12]=>
  string(9) "MacDonald"
  ["bkgReqByLastName"]=>
  string(9) "MacDonald"
  [13]=>
  string(4) "2951"
  ["bkgReqByTelephone"]=>
  string(4) "2951"
  [14]=>
  string(22) "j.macdonald@rbge.ac.uk"
  ["bkgReqByEmail"]=>
  string(22) "j.macdonald@rbge.ac.uk"
  [15]=>
  NULL
  ["bkgAltContactCrgRef"]=>
  NULL
  [16]=>
  NULL
  ["bkgAltContactFirstName"]=>
  NULL
  [17]=>
  NULL
  ["bkgAltContactLastName"]=>
  NULL
  [18]=>
  NULL
  ["bkgAltContactTelephone"]=>
  NULL
  [19]=>
  NULL
  ["bkgAltContactEmail"]=>
  NULL
  [20]=>
  NULL
  ["bkgHostCrgRef"]=>
  NULL
  [21]=>
  NULL
  ["bkgHostFirstName"]=>
  NULL
  [22]=>
  NULL
  ["bkgHostLastName"]=>
  NULL
  [23]=>
  NULL
  ["bkgHostTelephone"]=>
  NULL
  [24]=>
  NULL
  ["bkgHostEmail"]=>
  NULL
  [25]=>
  float(100)
  ["bkgAttendees"]=>
  float(100)
  [26]=>
  string(26) "Nov 25 2015 12:00:00:000AM"
  ["BkgDate"]=>
  string(26) "Nov 25 2015 12:00:00:000AM"
  [27]=>
  float(7.5)
  ["bkgStart"]=>
  float(7.5)
  [28]=>
  float(21.5)
  ["bkgEnd"]=>
  float(21.5)
  [29]=>
  float(0)
  ["bkgChangeoverTime"]=>
  float(0)
  [30]=>
  NULL
  ["bkgAdditionalReqs"]=>
  NULL
  [31]=>
  string(1) "L"
  ["bkgType"]=>
  string(1) "L"
  [32]=>
  string(1) "P"
  ["bkgStatus"]=>
  string(1) "P"
  [33]=>
  float(0)
  ["bkgFee"]=>
  float(0)
  [34]=>
  float(0)
  ["bkgHourlyCharge"]=>
  float(0)
  [35]=>
  float(0)
  ["bkgServiceCharge"]=>
  float(0)
  [36]=>
  string(1) "T"
  ["bkgIsRepeated_bool"]=>
  string(1) "T"
  [37]=>
  NULL
  ["bkgRepeatParentReg"]=>
  NULL
  [38]=>
  float(48606)
  ["bkgRepeatBkgRef"]=>
  float(48606)
  [39]=>
  string(1) "F"
  ["bkgConfByPrint_bool"]=>
  string(1) "F"
  [40]=>
  string(1) "T"
  ["bkgConfByEmail_bool"]=>
  string(1) "T"
  [41]=>
  string(1) "F"
  ["bkgConfGenerated_bool"]=>
  string(1) "F"
  [42]=>
  NULL
  ["bkgAuditTrail"]=>
  NULL
  [43]=>
  string(1) "F"
  ["bkgServicesBooked_bool"]=>
  string(1) "F"
  [44]=>
  string(1) "F"
  ["bkgEquipBooked_bool"]=>
  string(1) "F"
  [45]=>
  string(1) "F"
  ["bkgAttendeesListed_bool"]=>
  string(1) "F"
  [46]=>
  NULL
  ["bkgAltContact"]=>
  NULL
  [47]=>
  NULL
  ["bkgCancelledReason"]=>
  NULL
  [48]=>
  string(25) "rbBookingConfirmation.rtm"
  ["bkgConfPrintReport"]=>
  string(25) "rbBookingConfirmation.rtm"
  [49]=>
  string(25) "rbBookingConfirmation.rtm"
  ["bkgConfEmailReport"]=>
  string(25) "rbBookingConfirmation.rtm"
  [50]=>
  string(7) "Default"
  ["bkgNotifyPrinter"]=>
  string(7) "Default"
}
array(101) {
  [0]=>
  float(21)
  ["rmID"]=>
  float(21)
  [1]=>
  string(21) "***** JOHN MUIR GROVE"
  ["rmDescription"]=>
  string(21) "***** JOHN MUIR GROVE"
  [2]=>
  float(49575)
  ["bkgID_ai"]=>
  float(49575)
  [3]=>
  float(48914)
  ["bkgRef"]=>
  float(48914)
  [4]=>
  float(21)
  [5]=>
  float(31)
  ["rlID"]=>
  float(31)
  [6]=>
  NULL
  ["npmJobRef"]=>
  NULL
  [7]=>
  string(3) "JIM"
  ["bkgCreatedByUser"]=>
  string(3) "JIM"
  [8]=>
  string(26) "Apr 26 2013 01:38:04:603PM"
  ["bkgCreatedDate"]=>
  string(26) "Apr 26 2013 01:38:04:603PM"
  [9]=>
  string(28) "CONTACT PRESTIGE FOR BOOKING"
  ["bkgDesc"]=>
  string(28) "CONTACT PRESTIGE FOR BOOKING"
  [10]=>
  float(70)
  ["bkgReqByCrgRef"]=>
  float(70)
  [11]=>
  string(3) "Jim"
  ["bkgReqByFirstName"]=>
  string(3) "Jim"
  [12]=>
  string(9) "MacDonald"
  ["bkgReqByLastName"]=>
  string(9) "MacDonald"
  [13]=>
  string(4) "2951"
  ["bkgReqByTelephone"]=>
  string(4) "2951"
  [14]=>
  string(22) "j.macdonald@rbge.ac.uk"
  ["bkgReqByEmail"]=>
  string(22) "j.macdonald@rbge.ac.uk"
  [15]=>
  NULL
  ["bkgAltContactCrgRef"]=>
  NULL
  [16]=>
  NULL
  ["bkgAltContactFirstName"]=>
  NULL
  [17]=>
  NULL
  ["bkgAltContactLastName"]=>
  NULL
  [18]=>
  NULL
  ["bkgAltContactTelephone"]=>
  NULL
  [19]=>
  NULL
  ["bkgAltContactEmail"]=>
  NULL
  [20]=>
  NULL
  ["bkgHostCrgRef"]=>
  NULL
  [21]=>
  NULL
  ["bkgHostFirstName"]=>
  NULL
  [22]=>
  NULL
  ["bkgHostLastName"]=>
  NULL
  [23]=>
  NULL
  ["bkgHostTelephone"]=>
  NULL
  [24]=>
  NULL
  ["bkgHostEmail"]=>
  NULL
  [25]=>
  float(100)
  ["bkgAttendees"]=>
  float(100)
  [26]=>
  string(26) "Nov 26 2015 12:00:00:000AM"
  ["BkgDate"]=>
  string(26) "Nov 26 2015 12:00:00:000AM"
  [27]=>
  float(7.5)
  ["bkgStart"]=>
  float(7.5)
  [28]=>
  float(21.5)
  ["bkgEnd"]=>
  float(21.5)
  [29]=>
  float(0)
  ["bkgChangeoverTime"]=>
  float(0)
  [30]=>
  NULL
  ["bkgAdditionalReqs"]=>
  NULL
  [31]=>
  string(1) "L"
  ["bkgType"]=>
  string(1) "L"
  [32]=>
  string(1) "P"
  ["bkgStatus"]=>
  string(1) "P"
  [33]=>
  float(0)
  ["bkgFee"]=>
  float(0)
  [34]=>
  float(0)
  ["bkgHourlyCharge"]=>
  float(0)
  [35]=>
  float(0)
  ["bkgServiceCharge"]=>
  float(0)
  [36]=>
  string(1) "T"
  ["bkgIsRepeated_bool"]=>
  string(1) "T"
  [37]=>
  NULL
  ["bkgRepeatParentReg"]=>
  NULL
  [38]=>
  float(48606)
  ["bkgRepeatBkgRef"]=>
  float(48606)
  [39]=>
  string(1) "F"
  ["bkgConfByPrint_bool"]=>
  string(1) "F"
  [40]=>
  string(1) "T"
  ["bkgConfByEmail_bool"]=>
  string(1) "T"
  [41]=>
  string(1) "F"
  ["bkgConfGenerated_bool"]=>
  string(1) "F"
  [42]=>
  NULL
  ["bkgAuditTrail"]=>
  NULL
  [43]=>
  string(1) "F"
  ["bkgServicesBooked_bool"]=>
  string(1) "F"
  [44]=>
  string(1) "F"
  ["bkgEquipBooked_bool"]=>
  string(1) "F"
  [45]=>
  string(1) "F"
  ["bkgAttendeesListed_bool"]=>
  string(1) "F"
  [46]=>
  NULL
  ["bkgAltContact"]=>
  NULL
  [47]=>
  NULL
  ["bkgCancelledReason"]=>
  NULL
  [48]=>
  string(25) "rbBookingConfirmation.rtm"
  ["bkgConfPrintReport"]=>
  string(25) "rbBookingConfirmation.rtm"
  [49]=>
  string(25) "rbBookingConfirmation.rtm"
  ["bkgConfEmailReport"]=>
  string(25) "rbBookingConfirmation.rtm"
  [50]=>
  string(7) "Default"
  ["bkgNotifyPrinter"]=>
  string(7) "Default"
}
